<html>
  <head>
    <style>
      .box {
        border: 2px solid #000;
        float:left;
        margin:10px; 
        height: 385px;
        padding-left: 10px;
        padding-right: 10px;
      }
    </style>
    <link rel="stylesheet" type="text/css" href="../build/Canvas2D.css" />
<!--    <script src="../build/Canvas2D.standalone.min.js"></script> -->
    <script src="../lib/excanvas.js"></script>
    <script src="../lib/prototype-1.6.0.3.js"></script>
    <script src="../lib/canvastext.js"></script>
    <script src="../lib/tabber/tabber.js"></script>
    <script src="../lib/ADL/build/ADL.shared.js"></script>

    <script src="../src/DepCheck.js"></script>
    <script src="../src/SanityChecks.js"></script>
    <script src="../src/Common.js"></script>
    <script src="../src/Canvas2D.js"></script>
    <script src="../src/Factory.js"></script>
    <script src="../src/ImageManager.js"></script>
    <script src="../src/Manager.js"></script>
    <script src="../src/ADLVisitor.js"></script>
    <script src="../src/Book.js"></script>
    <script src="../src/Shape.js"></script>
    <script src="../src/Sheet.js"></script>
    <script src="../src/Position.js"></script>
    <script src="../src/Rectangle.js"></script>
    <script src="../src/Connector.js"></script>
    <script src="../src/Line.js"></script>
    <script src="../src/LinePath.js"></script>
    <script src="../src/Text.js"></script>
    <script src="../src/Image.js"></script>
    <script src="../src/Alias.js"></script>
    <script src="../src/plugins/TabbedCanvas.js"></script>
    <script src="../src/KickStart.js"></script>
    <script src="../src/Defaults.js"></script>

  </head>
  <body onload="drawIt();">
    <h1>Custom Connectors and Console</h1>
    <div class="box">
      <h2>Canvas</h2>
      <canvas id="myDiagram"  width="300" height="250"></canvas>
    </div>
    <div class="box">
      <h2>Console</h2>
      <textarea id="myDiagramConsole" style="height:250" cols="50"></textarea>
    </div>
  
    <script>
      var custom_connector = 
        {n:{lines:[[ -5, -10],[ +5,-10],[  0,  0]],end:[ 0,-10]},
         e:{lines:[[+10,  +5],[+10, -5],[  0,  0]],end:[10,  0]},
         s:{lines:[[ +5, +10],[ -5,+10],[  0,  0]],end:[ 0, 10]},
         w:{lines:[[-10,  -5],[-10, +5],[  0,  0]],end:[-10, 0]}};

      function drawIt() {
        var manager = new Canvas2D.Manager();
        var book = manager.setupBook("myDiagram")
        with( book.addSheet() ) {
          freeze();
          var rect1 = at(100, 10)
              .put(new Canvas2D.Rectangle({width:75,height:75,lineColor:"green"} ));
          var rect2 = at( 25,150)
              .put(new Canvas2D.Rectangle({width:50,height:50,lineColor:"red"  } ));
          var rect3 = at(150,150)
              .put(new Canvas2D.Rectangle({width:50,height:50,lineColor:"red"  } ));

          var conn1 = put(new Canvas2D.Connector( { from: rect1, 
                                                    to:   rect2, 
                                                    routing: "horizontal",
                                                    end: custom_connector } ));
          var conn2 = put(new Canvas2D.Connector( { from: rect1, 
                                                    to:   rect3, 
                                                    routing: "vertical",
                                                    lineStyle: "dashed",
                                                    begin: custom_connector }));
          makeDynamic();
          thaw();
        }
        manager.startAll();
      }
    </script>

  </body>
</html>

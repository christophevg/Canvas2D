<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../build/Canvas2D.css" />
    <script type="text/javascript" src="includes.js"></script>
  </head>
  <body>
    <h1>MDC 2 : Using Images</h1>
    <p>
      The example is taken from the excellent Canvas Tutorial by the
      Mozilla developers. Besides the standard HTML5 Canvas API, the
      same example is implemented using the Canvas2D API and the
      Canvas2D Shapes DSL.</p>

    <h2>HTML5 Canvas API</h2>
    <p>This example is taken
    from <a href="https://developer.mozilla.org/en/Canvas_tutorial/Using_images">https://developer.mozilla.org/en/Canvas_tutorial/Using_images</a>. It
    introduces the usage of images through the HTML5 Canvas API.</p>

    <table cellspacing="10">
      <tr>
	<td valign="top">
	  <canvas id="canvas" width="200" height="150"></canvas></td>
	<td valign="top">
	  <pre>
var ctx = document.getElementById('canvas').getContext('2d');  
var img = new Image();  
  img.onload = function(){  
  ctx.drawImage(img,0,0);  
  ctx.beginPath();  
  ctx.moveTo(30,96);  
  ctx.lineTo(70,66);  
  ctx.lineTo(103,76);  
  ctx.lineTo(170,15);  
  ctx.stroke();  
}  
img.src = 'images/backdrop.png'; 
	  </pre>
	</td>
      </tr>
    </table>
    <script>
      var ctx = document.getElementById('canvas').getContext('2d');  
      var img = new Image();  
        img.onload = function(){  
        ctx.drawImage(img,0,0);  
        ctx.beginPath();  
        ctx.moveTo(30,96);  
        ctx.lineTo(70,66);  
        ctx.lineTo(103,76);  
        ctx.lineTo(170,15);  
        ctx.stroke();  
      }  
    img.src = 'images/backdrop.png'; 
    </script>

    <h2>Canvas2D API</h2>
    <p>The Canvas2D API offers a wrapper around the native canvas
    implementation. While doing this, it implements the entire HTML5
    Canvas Specification on all browsers, while we wait for all
    browsers to become 100% stanard compliant.</p>
    <p>On the left, the full-fletched code is shown, but with a
    convenience method on the left, the same one-line initialisation
    is acchieved. The only thing to do is copy and paste the natve
    code ... et voila.</p>
    <table cellspacing="10">
      <tr>
	<td valign="top">
	  <canvas id="Canvas2D" width="200" height="150"></canvas></td>
	<td valign="top">
	  <pre>
var manager = new Canvas2D.Manager();
var canvas  = manager.setupBook("Canvas2D");
var ctx     = canvas.addSheet();
manager.startAll();

var img = new Image();  
img.onload = function(){  
  ctx.drawImage(img,0,0);  
  ctx.beginPath();  
  ctx.moveTo(30,96);  
  ctx.lineTo(70,66);  
  ctx.lineTo(103,76);  
  ctx.lineTo(170,15);  
  ctx.stroke();  
}
img.src = 'images/backdrop.png'; 
	  </pre>
	</td>
	<td valign="top">
	  <pre>
var ctx = Canvas2D.activate("Canvas2D");

var img = new Image();  
img.onload = function(){  
  ctx.drawImage(img,0,0);  
  ctx.beginPath();  
  ctx.moveTo(30,96);  
  ctx.lineTo(70,66);  
  ctx.lineTo(103,76);  
  ctx.lineTo(170,15);  
  ctx.stroke();  
}
img.src = 'images/backdrop.png'; 
	  </pre>
	</td>
      </tr>
    </table>
    <script>
var ctx2 = Canvas2D.activate("Canvas2D");

var img = new Image();  
img.onload = function(){  
  ctx2.drawImage(img,0,0);  
  ctx2.beginPath();  
  ctx2.moveTo(30,96);  
  ctx2.lineTo(70,66);  
  ctx2.lineTo(103,76);  
  ctx2.lineTo(170,15);  
  ctx2.stroke();  
}
img.src = 'images/backdrop.png'; 
    </script>

    <h2>Canvas2D Shapes</h2>
    <p>Finally we can use the Canvas2D Shapes DSL. No more Javascript
    is needed and thanks to the Kickstart detection system, the source
    for the Canvas is automagically discovered. A simple HTML element
    containing the DSL code is sufficient to populate the Canvas.</p>
    <p>This example also introduces the <tt>dynamic</tt> modifier,
    which makes Canvas2D interactive. Try clicking on one of the
    shapes or click and drag ...</p>
    <p>Besides the "normal" way of drawing multiple lines, we also
    introduce the linePath shape, that allows drawing a path
    consisting of lines, by just identifying the relative changes.</p>
    <table cellspacing="10">
      <tr>
	<td valign="top"><canvas id="Canvas2DShapes" class="Canvas2D" 
		    width="200" height="150"></canvas></td>
	<td valign="top">
	  <pre>
sheet mySheet +dynamic {
  [@  0, 0] image img  +src="images/backdrop.png";
  [@ 30,96] line  line1 +dx=40 +dy=-30;
  [@ 70,66] line  line2 +dx=33 +dy=10;
  [@103,76] line  line3 +dx=67 +dy=-61;
}
	  </pre>
	</td>
	<td valign="top">
	  <pre id="Canvas2DShapesSource">
sheet mySheet +dynamic {
  image  img  +src="images/backdrop.png";
  linePath lines +start="30,96" +moves="40,-30;33,10;67,-61";
}
	  </pre>
	</td>
      </tr>
    </table>
  </body>
</html>
